<html>
  <head>
    <meta charset="utf-8" />
    <title>Vis Network | Other | Clustering</title>
  </head>
  <body>
    <form
      id="form"
      action="https://codepen.io/pen/define"
      method="post"
      target="_self"
    >
      <input
        type="hidden"
        name="data"
        value='{"css":"#mynetwork {\n  width: 600px;\n  height: 600px;\n  border: 1px solid lightgray;\n}\np {\n  max-width: 600px;\n}\n\nh4 {\n  margin-bottom: 3px;\n}\n","css_external":"","html":"<p>\n  Click any of the buttons below to cluster the network. On every push the\n  network will be reinitialized first. You can click on a cluster to open it.\n</p>\n\n<input\n  type=\"button\"\n  onclick=\"clusterByCid()\"\n  value=\"Cluster all nodes with CID = 1\"\n/>\n<br />\n<input type=\"button\" onclick=\"clusterByColor()\" value=\"Cluster by color\" />\n<br />\n<input\n  type=\"button\"\n  onclick=\"clusterByConnection()\"\n  value=\"Cluster &apos;node 1&apos; by connections\"\n/>\n<br />\n<input type=\"button\" onclick=\"clusterOutliers()\" value=\"Cluster outliers\" />\n<br />\n<input type=\"button\" onclick=\"clusterByHubsize()\" value=\"Cluster by hubsize\" />\n<br />\n\n<div id=\"mynetwork\"></div>\n","js":"// create an array with nodes\nvar nodes = [\n  { id: 1, label: \"Node 1\", color: \"orange\" },\n  {\n    id: 2,\n    label: \"Node 2\",\n    color: \"DarkViolet\",\n    font: { color: \"white\" },\n  },\n  { id: 3, label: \"Node 3\", color: \"orange\" },\n  {\n    id: 4,\n    label: \"Node 4\",\n    color: \"DarkViolet\",\n    font: { color: \"white\" },\n  },\n  { id: 5, label: \"Node 5\", color: \"orange\" },\n  { id: 6, label: \"cid = 1\", cid: 1, color: \"orange\" },\n  {\n    id: 7,\n    label: \"cid = 1\",\n    cid: 1,\n    color: \"DarkViolet\",\n    font: { color: \"white\" },\n  },\n  { id: 8, label: \"cid = 1\", cid: 1, color: \"lime\" },\n  { id: 9, label: \"cid = 1\", cid: 1, color: \"orange\" },\n  { id: 10, label: \"cid = 1\", cid: 1, color: \"lime\" },\n];\n\n// create an array with edges\nvar edges = [\n  { from: 1, to: 2 },\n  { from: 1, to: 3 },\n  { from: 10, to: 4 },\n  { from: 2, to: 5 },\n  { from: 6, to: 2 },\n  { from: 7, to: 5 },\n  { from: 8, to: 6 },\n  { from: 9, to: 7 },\n  { from: 10, to: 9 },\n];\n\n// create a network\nvar container = document.getElementById(\"mynetwork\");\nvar data = {\n  nodes: nodes,\n  edges: edges,\n};\nvar options = { layout: { randomSeed: 8 } };\nvar network = new vis.Network(container, data, options);\nnetwork.on(\"selectNode\", function (params) {\n  if (params.nodes.length == 1) {\n    if (network.isCluster(params.nodes[0]) == true) {\n      network.openCluster(params.nodes[0]);\n    }\n  }\n});\n\nfunction clusterByCid() {\n  network.setData(data);\n  var clusterOptionsByData = {\n    joinCondition: function (childOptions) {\n      return childOptions.cid == 1;\n    },\n    clusterNodeProperties: {\n      id: \"cidCluster\",\n      borderWidth: 3,\n      shape: \"database\",\n    },\n  };\n  network.cluster(clusterOptionsByData);\n}\nfunction clusterByColor() {\n  network.setData(data);\n  var colors = [\"orange\", \"lime\", \"DarkViolet\"];\n  var clusterOptionsByData;\n  for (var i = 0; i < colors.length; i++) {\n    var color = colors[i];\n    clusterOptionsByData = {\n      joinCondition: function (childOptions) {\n        return childOptions.color.background == color; // the color is fully defined in the node.\n      },\n      processProperties: function (clusterOptions, childNodes, childEdges) {\n        var totalMass = 0;\n        for (var i = 0; i < childNodes.length; i++) {\n          totalMass += childNodes[i].mass;\n        }\n        clusterOptions.mass = totalMass;\n        return clusterOptions;\n      },\n      clusterNodeProperties: {\n        id: \"cluster:\" + color,\n        borderWidth: 3,\n        shape: \"database\",\n        color: color,\n        label: \"color:\" + color,\n      },\n    };\n    network.cluster(clusterOptionsByData);\n  }\n}\nfunction clusterByConnection() {\n  network.setData(data);\n  network.clusterByConnection(1);\n}\nfunction clusterOutliers() {\n  network.setData(data);\n  network.clusterOutliers();\n}\nfunction clusterByHubsize() {\n  network.setData(data);\n  var clusterOptionsByData = {\n    processProperties: function (clusterOptions, childNodes) {\n      clusterOptions.label = \"[\" + childNodes.length + \"]\";\n      return clusterOptions;\n    },\n    clusterNodeProperties: {\n      borderWidth: 3,\n      shape: \"box\",\n      font: { size: 30 },\n    },\n  };\n  network.clusterByHubsize(undefined, clusterOptionsByData);\n}\n","js_external":"https://visjs.github.io/vis-network/standalone/umd/vis-network.min.js","title":"Vis Network | Other | Clustering"}'
      />
      <button id="open" alt="JSFiddle" title="JSFiddle">Open CodePen</button>
    </form>

    <script type="text/javascript">
      document.getElementById("open").click();
    </script>
  </body>
</html>
