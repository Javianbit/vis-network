<html>
  <head>
    <meta charset="utf-8" />
    <title>Vis Network | Edge Styles | Self Reference</title>
  </head>
  <body>
    <form
      id="form"
      action="https://jsfiddle.net/api/post/library/pure/"
      method="post"
      target="_self"
    >
      <input
        type="hidden"
        name="css"
        value="#mynetwork {
  width: 800px;
  height: 600px;
  border: 1px solid lightgray;
}
"
      />
      <input
        type="hidden"
        name="html"
        value='<div id="mynetwork"></div>
'
      />
      <input
        type="hidden"
        name="js"
        value='// create an array with nodes

var nodes = new vis.DataSet([
  {
    id: 1,
    label: [
      "I&apos;m an alligator,",
      "I&apos;m a mama-papa coming for you.",
      "I&apos;m the space invader,",
      "I&apos;ll be a rock &apos;n&apos; rollin&apos; bitch for you.",
    ].join("\n"),
    x: 0,
    y: 0,
    color: {
      background: "transparent",
    },
  },
  {
    id: 2,
    label: [
      "An edge connected to the same node on both end renders a circle.",
      "Both from and to arrows point to the same node.",
      "The radius of the edge can be adjusted using selfReference.size.",
      "The edge can be positioned using selfReference.angle.",
      "The part of the edge behind the node can be hidden using selfReference.renderBehindTheNode.",
    ].join("\n"),
    widthConstraint: { minimum: 100 },
    heightConstraint: { minimum: 100 },
    x: 200,
    y: 200,
    color: {
      background: "transparent",
    },
  },
  {
    id: 3,
    label: [
      "Self reference edge is in the bottom left corner",
      "with parts rendered behind node",
    ].join("\n"),
    widthConstraint: { minimum: 100 },
    heightConstraint: { minimum: 100 },
    x: 400,
    y: 400,
    color: {
      background: "transparent",
    },
    shape: "box",
  },
]);

// create an array with edges
var edges = new vis.DataSet([
  { from: 1, to: 1, label: "Moonage Daydream" },
  {
    from: 2,
    to: 2,
    label: "Testing",
    arrows: "to, middle, from",
    selfReference: {
      size: 40,
      angle: (Math.PI * 7) / 6,
      renderBehindTheNode: false,
    },
  },
  {
    from: 3,
    to: 3,
    label: "Testing",
    arrows: "to, middle, from",
    selfReference: {
      size: 40,
      angle: (Math.PI * 7) / 6,
      renderBehindTheNode: true,
    },
  },
]);

// create a network
var container = document.getElementById("mynetwork");
var data = {
  nodes: nodes,
  edges: edges,
};
var options = {
  edges: {
    color: {
      color: "#2B7CE9",
      highlight: "#2B7CE9",
      hover: "#2B7CE9",
    },
    hoverWidth: function (width) {
      return width + 2;
    },
    shadow: true,
  },
  interaction: {
    hover: true,
  },
};
var network = new vis.Network(container, data, options);

(async () => {
  let angle = -100;

  for (;;) {
    await new Promise((resolve) => setTimeout(resolve, 100));

    ++angle;
    console.log("set self reference angle to", angle / 10);
    network.setOptions({
      edges: {
        arrows: { to: true, from: true, middle: true },
        selfReference: {
          size: 20,
          angle: angle / 10,
          renderBehindTheNode: false,
        },
      },
    });
  }
})();
'
      />
      <input
        type="hidden"
        name="resources"
        value="https://visjs.github.io/vis-network/standalone/umd/vis-network.js"
      />
      <input
        type="hidden"
        name="title"
        value="Vis Network | Edge Styles | Self Reference"
      />
      <input type="hidden" name="wrap" value="b" />
      <button id="open" alt="JSFiddle" title="JSFiddle">Open JSFiddle</button>
    </form>

    <script type="text/javascript">
      document.getElementById("open").click();
    </script>
  </body>
</html>
